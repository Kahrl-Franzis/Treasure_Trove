<!-- src/app/product-category/product-category.component.html -->

<div class="catalog-page-container">
    <h1 class="pirate-font">Captain's Catalog of Treasures</h1>
    
    <!-- Error message display -->
    <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>

    <!-- Product Grid: Displays items fetched from the backend -->
    <div class="product-grid">
        <!-- Loop through all the products fetched from the backend -->
        <div *ngFor="let product of products" class="product-card">
            
            <!-- CRITICAL FIX 1: Use the correct 'imageUrl' property -->
            <img [src]="product.imageUrl" [alt]="product.title" class="product-image">
            
            <div class="product-details">
                
                <!-- CRITICAL FIX 2: Use the correct 'title' property -->
                <h3>{{ product.title }}</h3> 
                
                <p class="author">By {{ product.author }}</p>
                
                <p class="price">â‚± {{ product.price | number:'1.2-2' }}</p>

                <button 
                    (click)="stashInChest(product)" 
                    class="btn-stash"
                    [disabled]="product.stockQuantity <= 0">
                    {{ product.stockQuantity > 0 ? 'Stash in Chest' : 'Out of Stock!' }}
                </button>
                
                <p *ngIf="product.stockQuantity > 0 && product.stockQuantity < 10" class="low-stock">
                    (Low Treasure Warning!)
                </p>
            </div>
        </div>
    </div>
</div>